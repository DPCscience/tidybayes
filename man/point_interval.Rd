% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/point_interval.R
\name{point_interval}
\alias{point_interval}
\alias{point_interval.default}
\alias{point_interval.numeric}
\alias{point_intervalh}
\alias{qi}
\alias{hdi}
\alias{mean_qi}
\alias{mean_qih}
\alias{median_qi}
\alias{median_qih}
\alias{mode_qi}
\alias{mode_qih}
\alias{mean_hdi}
\alias{mean_hdih}
\alias{median_hdi}
\alias{median_hdih}
\alias{mode_hdi}
\alias{mode_hdih}
\title{Point and interval estimates for tidy sample data}
\usage{
point_interval(.data, ..., .prob = 0.95, .point = mean, .interval = qi,
  .broom = TRUE)

\method{point_interval}{default}(.data, ..., .prob = 0.95, .point = mean,
  .interval = qi, .broom = TRUE)

\method{point_interval}{numeric}(.data, ..., .prob = 0.95, .point = mean,
  .interval = qi, .broom = FALSE)

point_intervalh(...)

qi(x, .prob = 0.95)

hdi(x, .prob = 0.95)

mean_qi(.data, ..., .prob = 0.95)

mean_qih(...)

median_qi(.data, ..., .prob = 0.95)

median_qih(...)

mode_qi(.data, ..., .prob = 0.95)

mode_qih(...)

mean_hdi(.data, ..., .prob = 0.95)

mean_hdih(...)

median_hdi(.data, ..., .prob = 0.95)

median_hdih(...)

mode_hdi(.data, ..., .prob = 0.95)

mode_hdih(...)
}
\arguments{
\item{.data}{Data frame (or grouped data frame as returned by \code{\link{group_by}})
that contains samples to summarize.}

\item{...}{Bare column names or expressions that, when evaluated in the context of
\code{.data}, represent samples to summarise. If this is empty, then by default all
columns that are not group columns or start with \code{"."} (e.g. \code{".chain"}
or \code{".iteration"}) will be summarised.}

\item{.prob}{vector of probabilities to use for generating intervals. If multiple
probabilities are provided, multiple rows per group are generated, each with
a different probabilty interval (and value of the corresponding \code{.prob} column).}

\item{.point}{Point estimate function, which takes a vector and returns a single
value, e.g. \code{\link{mean}}, \code{\link{median}}, or \code{\link{Mode}}.}

\item{.interval}{Interval estimate function, which takes a vector and a probability
(\code{.prob}) and returns a two-element vector representing the lower and upper
bound of an interval; e.g. \code{\link{qi}}, \code{\link{hdi}}}

\item{.broom}{When \code{TRUE} and only a single estimate is to be output, use the
name \code{conf.low} for the lower end of the interval and \code{conf.high} for the
upper end for consistency with \code{\link[broom]{tidy}} in the broom package. If
\code{.data} is a vector and this is \code{TRUE}, this will also set the column name
of the point estimate to \code{estimate}.}

\item{x}{vector to summarise (for interval functions: \code{qi} and \code{hdi})}
}
\description{
Translates samples in a (possibly grouped) data frame into a point and
interval estimate (or set of point and interval estimates, if there are
multiple groups in a grouped data frame).
}
\details{
If \code{.data} is a data frame, then \code{...} is a list of bare names of
columns (or expressions derived from columns) of \code{.data}, on which
the point and interval estimates are derived. Column expressions are processed
using the tidy evaluation framework (see \code{\link[rlang]{eval_tidy}}).

For a column named \code{x},
the resulting data frame will have columns \code{x} (the point estimate),
\code{x.low} (the lower end of the interval), \code{x.high} (the upper
end of the interval), and \code{.prob}.

If \code{.data} includes groups (see e.g. \code{\link[dplyr]{group_by}}),
the points and intervals are calculated within the groups.

If \code{.data} is a vector, \code{...} is ignored and the result is a
data frame with one row per value of \code{.prob} and three columns:
\code{y} (the point estimate), \code{ymin} (the lower end of the interval),
\code{ymax} (the upper end of the interval), and \code{.prob}, the probability
corresponding to the interval. This behavior allows \code{point_interval}
and its derived functions (like \code{mean_qi}, \code{median_qi}, etc)
to be easily used to plot intervals in ggplot using methods like
\code{\link{geom_eye}}, \code{\link{geom_eyeh}}, or \code{\link{stat_summary}}.

The functions ending in \code{h} (e.g., \code{point_intervalh}, \code{mean_qih})
behave identically to the function without the h, except that when passed a vector,
they return a data frame with \code{x}/\code{xmin}/\code{xmax} instead of
\code{y}/\code{ymin}/\code{ymax}. This allows them to be used as values of the
\code{fun.data = } argument of \code{stat_summaryh}.

\code{mean_qi}, \code{mode_qi}, etc are short forms for
\code{point_interval(..., .point = mean, .interval = qi)}, etc.

\code{qi} yields the quantile interval (also known as the percentile interval or
equi-tailed interval) as a 1x2 matrix.

\code{hdi} yields the highest-density interval(s) (also known as the highest posterior
density interval). \emph{Note:} If the distribution is multimodal, \code{hdi} may return multiple
intervals for each estimate (these will be spread over rows). Internally it uses \code{\link[HDInterval]{hdi}}.
}
\examples{

library(dplyr)
library(ggplot2)

set.seed(123)

rnorm(1000) \%>\%
  mean_qi()

data.frame(x = rnorm(1000)) \%>\%
  median_qi(x, .prob = c(.50, .80, .95))

data.frame(
    x = rnorm(1000),
    y = rnorm(1000, mean = 2, sd = 2)
  ) \%>\%
  median_qi(x, y)

data.frame(
    x = rnorm(1000),
    group = "a"
  ) \%>\%
  rbind(data.frame(
    x = rnorm(1000, mean = 2, sd = 2),
    group = "b")
  ) \%>\%
  group_by(group) \%>\%
  mean_qi(.prob = c(.50, .80, .95))

multimodal_samples = data.frame(
    x = c(rnorm(5000, 0, 1), rnorm(2500, 4, 1))
  )

multimodal_samples \%>\%
  mode_hdi(.prob = c(.66, .95))

multimodal_samples \%>\%
  ggplot(aes(x = x, y = 0)) +
  geom_halfeyeh(fun.data = mode_hdih, .prob = c(.66, .95))

}
\author{
Matthew Kay
}
