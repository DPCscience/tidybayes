% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_predicted_samples.R
\name{add_predicted_samples}
\alias{add_predicted_samples}
\alias{add_fitted_samples}
\alias{predicted_samples}
\alias{fitted_samples}
\alias{predicted_samples.default}
\alias{fitted_samples.default}
\alias{predicted_samples.stanreg}
\alias{fitted_samples.stanreg}
\alias{predicted_samples.brmsfit}
\alias{fitted_samples.brmsfit}
\title{Add samples from the posterior fit or posterior prediction of a model to a data frame}
\usage{
add_predicted_samples(newdata, model, var = "pred", ..., n = NULL)

add_fitted_samples(newdata, model, var = "estimate", auxpars = TRUE, ...,
  n = NULL)

predicted_samples(model, newdata, var = "pred", ..., n = NULL)

fitted_samples(model, newdata, var = "estimate", auxpars = TRUE, ...,
  n = NULL)

\method{predicted_samples}{default}(model, newdata, ...)

\method{fitted_samples}{default}(model, newdata, ...)

\method{predicted_samples}{stanreg}(model, newdata, var = "pred", ...,
  n = NULL)

\method{fitted_samples}{stanreg}(model, newdata, var = "estimate",
  auxpars = TRUE, ..., n = NULL)

\method{predicted_samples}{brmsfit}(model, newdata, var = "pred", ...,
  n = NULL)

\method{fitted_samples}{brmsfit}(model, newdata, var = "estimate",
  auxpars = TRUE, ..., n = NULL)
}
\arguments{
\item{newdata}{Data frame to generate predictions from. If omitted, most model types will
generate predictions from the data used to fit the model.}

\item{model}{A supported Bayesian model fit / MCMC object. Currently
supported models include \code{\link[coda]{mcmc}}, \code{\link[coda]{mcmc.list}},
\code{\link[runjags]{runjags}}, \code{\link[rstan]{stanfit}}, and anything with its own
\code{\link[coda]{as.mcmc.list}} implementation. If you install the \code{tidybayes.rethinking}
package (available at \url{https://github.com/mjskay/tidybayes.rethinking}), \code{map} and
\code{map2stan} models from the \code{rethinking} package are also supported.}

\item{var}{The name of the output column for the predictions (default `code{"pred"}`) or fits
(default \code{"estimate"}, for compatibility with \code{\link[broom]{tidy}}).}

\item{...}{Additional arguments passed to the underlying prediction method for the type of
model given.}

\item{n}{The number of samples per prediction / fit to return.}

\item{auxpars}{For \code{fitted_samples} and \code{add_fitted_samples}: Should auxiliary
parameters be included in the output? Valid only for models that support auxiliary parameters,
(such as submodels for variance parameters as in \code{brm}). If \code{TRUE}, auxiliary
parameters are included in the output as additional columns with the name \code{paste0(par, ".", var)}.
If \code{FALSE}, auxiliary parameters are not included.}
}
\value{
A data frame (actually, a \code{\link[tibble]{tibble}}) with a \code{.row} column (a
factor grouping rows from the input \code{newdata}), \code{.chain} column (the chain
each sample came from, or \code{NA} if the model does not provide chain information),
\code{.iteration} column (the iteration the sample came from), and \code{.pred} column (a
sample from the posterior predictive distribution). For convenience, the resulting data
frame comes grouped by the original input rows.
}
\description{
Given a data frame, adds samples from the posterior fit (aka the linear/link-level predictor)
or the posterior predictions of the model to the data in a long format.
}
\details{
\code{add_fitted_samples} adds samples from the posterior linear predictor (or the "link") to
the data. It corresponds to \code{\link[rstanarm]{posterior_linpred}} in \code{rstanarm} or
\code{\link[brms]{fitted.brmsfit}} in \code{brms}.

\code{add_predicted_samples} adds samples from the posterior prediction to
the data. It corresponds to \code{\link[rstanarm]{posterior_predict}} in \code{rstanarm} or
\code{\link[brms]{predict.brmsfit}} in \code{brms}.

\code{add_fitted_samples} and \code{fitted_samples} are alternate spellings of the
same function with opposite order of the first two arguments to facilitate use in data
processing pipelines that start either with a data frame or a model. Similarly,
\code{add_predicted_samples} and \code{predicted_samples} are alternate spellings.

Given equal choice between the two, \code{add_fitted_samples} and \code{add_predicted_samples}
are the preferred spellings.
}
\examples{

##TODO

}
\seealso{
\code{\link{spread_samples}}
}
\author{
Matthew Kay
}
\keyword{manip}
